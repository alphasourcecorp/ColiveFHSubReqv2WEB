import { JsonPipe } from '@angular/common';
import { JsonpInterceptor } from '@angular/common/http';
import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';
import { MenuItemSelectionInfo } from '../models/menu-item-selection-info';
import { MenuItem } from '../models/menuitem';
import { Menu } from '../models/menu';
import {AddcartService} from '../addcart.service'
@Component({
  selector: 'app-menuitemview',
  templateUrl: './menuitemview.component.html',
  styleUrls: ['./menuitemview.component.css']
})
export class MenuitemviewComponent implements OnInit {
  public menu:Menu;
  public value:any;
  @Input() menuItemSelectionInfo:MenuItemSelectionInfo;
  public loclobj2:any;
  @Input() public menuItem: MenuItem;
  @Output() public menuItemChanged = new EventEmitter<MenuItemSelectionInfo>();



  constructor( ) {
    this.value = {
      "0004001": "0",      "0004002": "0",      "0004003": "0",      "0004004": "0",      "0004005": "0",       "0004006": "0",       "0004007": "0",       "0004008": "0",
      "0004009": "0",      "0004010": "0",      "0003001": "0",      "0003002": "0",      "0003003": "0",      "0006001": "0",       "0006002": "0",      "0006003": "0",
      "0006004": "0",      "0006005": "0",      "0006006": "0",      "0006007": "0",      "0007001": "0",      "0007002": "0",      "0007003": "0",      "0001001": "0",
      "0001002": "0",      "0001003": "0",      "0001004": "0",      "0001005": "0",      "0001006": "0",       "0001007": "0",       "0001008": "0",       "0001009": "0",
      "0001010": "0",      "0001011": "0",      "0001012": "0",      "0001013": "0",      "0002001": "0",       "0002002": "0",      "0002003": "0",       "0002004": "0",
      "0002005": "0",      "0002006": "0",      "0002007": "0",      "0002008": "0",      "0002009": "0",      "0002010": "0",      "0002011": "0",      "0002012": "0",
      "0005001": "0",      "0005002": "0",      "0005003": "0",      "0005004": "0",      "0005005": "0",      "0008001": "0",      "0008002": "0",      "0008003": "0",
      "0008004": "0",      "0008005": "0",      "0008006": "0",      "0009001": "0",      "0009002": "0",      "0009003": "0",      "0009004": "0",      "0009005": "0",
      "0009006": "0",      "0009007": "0",      "0009008": "0",      "0009009": "0",      "0010001": "0",      "0010002": "0",      "0010003": "0",      "0010004": "0",
      "0010005": "0",      "0010006": "0",      "0010007": "0",      "0010008": "0",      "0010009": "0",      "0010010": "0",      "0010011": "0",      "0010012": "0",
      "0010013": "0",      "0010014": "0",      "0010015": "0",      "0010016": "0",      "0010017": "0",      "0010018": "0",      "0011001": "0",      "0011002": "0",
      "0011003": "0",      "0011004": "0",      "0011005": "0",      "0011006": "0",      "0011007": "0",      "0011008": "0",      "0011009": "0",      "0011010": "0",
      "0011011": "0",      "0011012": "0",      "0011013": "0",      "0011014": "0",      "0011015": "0",      "0011016": "0",      "0011017": "0",      "0011018": "0",
      "0011019": "0",      "0011020": "0",      "0012001": "0",      "0012002": "0",      "0012003": "0",      "0012004": "0",      "0012005": "0",      "0013001": "0",
      "0013002": "0",      "0013003": "0",      "0014001": "0",      "0014002": "0",      "0014003": "0",      "0014004": "0",      "0015001": "0",      "0015002": "0",
      "0015003": "0",      "0016001": "0",      "0016002": "0",      "0016003": "0",      "0016004": "0",      "0016005": "0",      "0016006": "0",      "0016007": "0",
      "0016008": "0",      "0016009": "0",      "0017001": "0",      "0017002": "0",      "0017003": "0",      "0017004": "0",      "0017005": "0"
        };

  }

  ngOnInit(): void {
    // this.value['0004001']="5";
    // this.handleQuantity(1,"0004001");

    }

  handleQuantity(units: number,x) {
    var y = this.value[x];
    var z = parseInt(y);
    z -= units;

    if (z <= 0) {
      z = 0;
    }

    this.menuItemChanged.emit({
      menuItem: this.menuItem,
      quantity: z
    });

    this.value[x] = z.toString();


  }



}
